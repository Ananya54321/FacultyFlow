<% layout("/layouts/boilerplate")-%>

<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 style="color: #182527; font-weight: bold">Departments</h1>
    <%if(currUserStatus.role == 'admin'){%>
    <a
      href="/departments/new"
      class="btn btn-primary custom-btn"
      style="
        background-color: #1ecd8d;
        border-color: #1ecd8d;
        font-weight: 500;
      ">
      <i class="fas fa-plus-circle me-2"></i>Add New Department
    </a>
    <%}%>
  </div>

  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    <% for(let department of departmentList){ %>
    <div class="col">
      <div
        class="card h-100 shadow-sm hover-shadow"
        style="border: none; transition: all 0.3s">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title mb-3" style="color: #182527; font-weight: 600">
            <%= department.deptname %>
          </h5>
          <p class="card-text text-muted mb-4">
            Department Code: <%= department.deptcode %>
          </p>
          <div class="mt-auto d-flex justify-content-between">
            <a
              href="/departments/<%= department._id %>"
              class="btn btn-outline-primary custom-btn-outline"
              style="color: #1ecd8d; border-color: #1ecd8d; font-weight: 500">
              <i class="fas fa-info-circle me-2"></i>Details
            </a>
            <%if(currUserStatus.role == 'admin'){%>
            <a
              href="/departments/<%= department._id %>/announcements"
              class="btn btn-outline-secondary custom-btn-outline-secondary"
              style="color: #545454; border-color: #545454; font-weight: 500">
              <i class="fas fa-bullhorn me-2"></i>Announcements
            </a>
            <%}%>
          </div>
        </div>
      </div>
    </div>
    <% } %>
  </div>
</div>
